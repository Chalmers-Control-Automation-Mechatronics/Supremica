<?xml version="1.0" encoding="utf-8"?>
<Automata>

<!-- Path flow model -->
<Automaton name="a">
	<Events>
		<Event id="e1" label="part_ent" controllable="true" prioritized="true"/>
		<Event id="e2" label="part_arr1" controllable="false" prioritized="true"/>
		<Event id="e3" label="part_lv1" controllable="true" prioritized="true"/>
		<Event id="e4" label="str_exit" controllable="true" prioritized="true"/>
		<Event id="e5" label="fin_exit" controllable="false" prioritized="true"/>
		<Event id="e6" label="partLvExit" controllable="true" prioritized="true"/>
		<Event id="e7" label="part_arr2" controllable="false" prioritized="true"/>
		<Event id="e8" label="recog_A" controllable="false" prioritized="true"/>
		<Event id="e9" label="recog_B" controllable="false" prioritized="true"/>
		<Event id="e10" label="part_lv2" controllable="true" prioritized="true"/>
		<Event id="e11" label="part_arr3" controllable="false" prioritized="true"/>
		<Event id="e12" label="part_lv3" controllable="true" prioritized="true"/>
	</Events>
	<States>
		<State id="a0" initial="true" accepting="true"/>
		<State id="a1"/>
		<State id="a2"/>
		<State id="a3"/>
		<State id="a4"/>
		<State id="a5"/>
		<State id="a6"/>
		<State id="a7"/>
		<State id="a8"/>
		<State id="a9"/>		
	</States>
	<Transitions>
		<Transition source="a0" dest="a1" event="e1"/>
		<Transition source="a1" dest="a2" event="e2"/>
		<Transition source="a2" dest="a3" event="e3"/>
		<Transition source="a3" dest="a4" event="e4"/>
		<Transition source="a3" dest="a5" event="e6"/>
		<Transition source="a4" dest="a0" event="e5"/>	
		<Transition source="a5" dest="a6" event="e7"/>
		<Transition source="a6" dest="a7" event="e8"/>
		<Transition source="a6" dest="a7" event="e9"/>
		<Transition source="a7" dest="a8" event="e10"/>
		<Transition source="a8" dest="a9" event="e11"/>
		<Transition source="a9" dest="a1" event="e12"/>	
	</Transitions>
</Automaton>
<!-- Sequence tasks -->
<Automaton name="b">
	<Events>
		<Event id="e1" label="fin_exit" controllable="false" prioritized="true"/>
		<Event id="e2" label="part_ent" controllable="true" prioritized="true"/>
		<Event id="e3" label="part_arr1" controllable="false" prioritized="true"/>
		<Event id="e4" label="start_pol" controllable="true" prioritized="true"/>
		<Event id="e5" label="compl_pol" controllable="false" prioritized="true"/>
		<Event id="e6" label="part_lv1" controllable="true" prioritized="true"/>
		<Event id="e7" label="partLvExit" controllable="true" prioritized="true"/>
		<Event id="e8" label="part_arr2" controllable="false" prioritized="true"/>
		<Event id="e9" label="recog_A" controllable="false" prioritized="true"/>
		<Event id="e10" label="recog_B" controllable="false" prioritized="true"/>
		<Event id="e11" label="attch_ptA" controllable="true" prioritized="true"/>
		<Event id="e12" label="attch_ptB" controllable="true" prioritized="true"/>
		<Event id="e13" label="finA_attch" controllable="true" prioritized="true"/>
		<Event id="e14" label="finB_attch" controllable="true" prioritized="true"/>
		<Event id="e15" label="part_lv2" controllable="true" prioritized="true"/>
		<Event id="e16" label="part_arr3" controllable="false" prioritized="true"/>
		<Event id="e17" label="start_case" controllable="true" prioritized="true"/>
		<Event id="e18" label="compl_case" controllable="false" prioritized="true"/>		
		<Event id="e19" label="part_lv3" controllable="true" prioritized="true"/>
		<Event id="e20" label="str_exit" controllable="true" prioritized="true"/>
	</Events>
	<States>
		<State id="b0" initial="true" accepting="true"/>
		<State id="b1"/>
		<State id="b2"/>
		<State id="b3"/>
		<State id="b4"/>
		<State id="b5"/>
		<State id="b6"/>
		<State id="b7"/>
		<State id="b8"/>
		<State id="b9"/>		
		<State id="b10"/>
		<State id="b11"/>
		<State id="b12"/>
		<State id="b13"/>
		<State id="b14"/>
		<State id="b15"/>
		<State id="b16"/>
	</States>
	<Transitions>
		<Transition source="b0" dest="b0" event="e1"/>
		<Transition source="b0" dest="b1" event="e2"/>
		<Transition source="b1" dest="b2" event="e3"/>
		<Transition source="b2" dest="b3" event="e4"/>
		<Transition source="b3" dest="b4" event="e5"/>
		<Transition source="b4" dest="b5" event="e6"/>
		<Transition source="b5" dest="b5" event="e7"/>
		<Transition source="b5" dest="b5" event="e8"/>
		<Transition source="b5" dest="b6" event="e10"/>
		<Transition source="b5" dest="b7" event="e9"/>
		<Transition source="b6" dest="b8" event="e12"/>
		<Transition source="b7" dest="b9" event="e11"/>
		<Transition source="b8" dest="b10" event="e14"/>
		<Transition source="b9" dest="b10" event="e13"/>
		<Transition source="b10" dest="b11" event="e15"/>
		<Transition source="b11" dest="b12" event="e16"/>
		<Transition source="b12" dest="b13" event="e17"/>
		<Transition source="b13" dest="b14" event="e18"/>
		<Transition source="b14" dest="b15" event="e19"/>
		<Transition source="b15" dest="b16" event="e3"/>
		<Transition source="b16" dest="b16" event="e6"/>
		<Transition source="b16" dest="b0" event="e20"/>
	</Transitions>
</Automaton>
<!-- Packaging system c -->
<Automaton name="c">
	<Events>
		<Event id="e1" label="take_item" controllable="true" prioritized="true"/>
		<Event id="e2" label="package" controllable="false" prioritized="true"/>
		<Event id="e3" label="allow_exit" controllable="true" prioritized="true"/>
	</Events>
	<States>
		<State id="c0" initial="true" accepting="true"/>
		<State id="c1"/>
		<State id="c2"/>
	</States>
	<Transitions>
		<Transition source="c0" dest="c1" event="e1"/>
		<Transition source="c1" dest="c2" event="e2"/>
		<Transition source="c2" dest="c0" event="e3"/>
	</Transitions>
</Automaton>
<!-- Exit Buffer d -->
<Automaton name="d">
	<Events>
		<Event id="e1" label="str_exit" controllable="true" prioritized="true"/>
		<Event id="e2" label="fin_exit" controllable="false" prioritized="true"/>
		<Event id="e3" label="take_item" controllable="true" prioritized="true"/>
	</Events>
	<States>
		<State id="d0" initial="true" accepting="true"/>
		<State id="d1"/>
		<State id="d2"/>
	</States>
	<Transitions>
		<Transition source="d0" dest="d0" event="e1"/>
		<Transition source="d0" dest="d1" event="e2"/>
		<Transition source="d1" dest="d1" event="e1"/>
		<Transition source="d1" dest="d2" event="e2"/>
		<Transition source="d1" dest="d0" event="e3"/>
		<Transition source="d2" dest="d1" event="e3"/>
	</Transitions>
</Automaton>

<!-- Interface l -->
<!--

<Automaton name="l">
	<Events>
		<Event id="e1" label="start_pol" controllable="true" prioritized="true"/>
		<Event id="e2" label="compl_pol" controllable="false" prioritized="true"/>
		<Event id="e3" label="attch_ptA" controllable="true" prioritized="true"/>
		<Event id="e4" label="finA_attch" controllable="true" prioritized="true"/>
		<Event id="e5" label="attch_ptB" controllable="true" prioritized="true"/>
		<Event id="e6" label="finB_attch" controllable="true" prioritized="true"/>
		<Event id="e7" label="start_case" controllable="true" prioritized="true"/>
		<Event id="e8" label="compl_case" controllable="false" prioritized="true"/>		
	</Events>
	<States>
		<State id="l0" initial="true" accepting="true"/>
		<State id="l1"/>
		<State id="l2"/>
		<State id="l3"/>
		<State id="l4"/>
	</States>
	<Transitions>
		<Transition source="l0" dest="l1" event="e1"/>
		<Transition source="l1" dest="l0" event="e2"/>
		<Transition source="l0" dest="l2" event="e3"/>
		<Transition source="l2" dest="l0" event="e4"/>
		<Transition source="l0" dest="l3" event="e5"/>
		<Transition source="l3" dest="l0" event="e6"/>
		<Transition source="l0" dest="l4" event="e7"/>
		<Transition source="l4" dest="l0" event="e8"/>		
	</Transitions>
</Automaton>
-->

<!-- Attach part to Assembly e -->
<Automaton name="e">
	<Events>
		<Event id="e1" label="take_pt" controllable="true" prioritized="true"/>
		<Event id="e2" label="str_ptA" controllable="true" prioritized="true"/>
		<Event id="e3" label="str_ptB" controllable="true" prioritized="true"/>
		<Event id="e4" label="cmpl_A" controllable="false" prioritized="true"/>
		<Event id="e5" label="cmpl_B" controllable="false" prioritized="true"/>
		<Event id="e6" label="ret_pt" controllable="false" prioritized="true"/>	
	</Events>
	<States>
		<State id="e0" initial="true" accepting="true"/>
		<State id="e1"/>
		<State id="e2"/>
		<State id="e3"/>
		<State id="e4"/>
	</States>
	<Transitions>
		<Transition source="e0" dest="e1" event="e1"/>
		<Transition source="e1" dest="e2" event="e2"/>
		<Transition source="e1" dest="e3" event="e3"/>
		<Transition source="e2" dest="e4" event="e4"/>
		<Transition source="e3" dest="e4" event="e5"/>
		<Transition source="e4" dest="e0" event="e6"/>
	</Transitions>
</Automaton>
<!-- Polish part f -->
<Automaton name="f">
	<Events>
		<Event id="e1" label="start_pol" controllable="true" prioritized="true"/>
		<Event id="e2" label="dip_acid" controllable="true" prioritized="true"/>
		<Event id="e3" label="polish" controllable="true" prioritized="true"/>
		<Event id="e4" label="str_rlse" controllable="true" prioritized="true"/>
		<Event id="e5" label="compl_pol" controllable="false" prioritized="true"/>
	</Events>
	<States>
		<State id="f0" initial="true" accepting="true"/>
		<State id="f1"/>
		<State id="f2"/>
	</States>
	<Transitions>
		<Transition source="f0" dest="f1" event="e1"/>
		<Transition source="f1" dest="f1" event="e2"/>
		<Transition source="f1" dest="f1" event="e3"/>
		<Transition source="f1" dest="f2" event="e4"/>		
		<Transition source="f2" dest="f0" event="e5"/>
	</Transitions>
</Automaton>
<!-- Attach case to assembly g -->
<Automaton name="g">
	<Events>
		<Event id="e1" label="start_case" controllable="true" prioritized="true"/>
		<Event id="e2" label="attch_case" controllable="false" prioritized="true"/>
		<Event id="e3" label="compl_case" controllable="false" prioritized="true"/>
	</Events>
	<States>
		<State id="g0" initial="true" accepting="true"/>
		<State id="g1"/>
		<State id="g2"/>
	</States>
	<Transitions>
		<Transition source="g0" dest="g1" event="e1"/>
		<Transition source="g1" dest="g2" event="e2"/>
		<Transition source="g2" dest="g0" event="e3"/>
	</Transitions>
</Automaton>
<!-- Polishing sequence h -->
<Automaton name="h">
	<Events>
		<Event id="e1" label="start_pol" controllable="true" prioritized="true"/>
		<Event id="e2" label="dip_acid" controllable="true" prioritized="true"/>
		<Event id="e3" label="polish" controllable="true" prioritized="true"/>
		<Event id="e4" label="str_rlse" controllable="true" prioritized="true"/>
	</Events>
	<States>
		<State id="h0" initial="true" accepting="true"/>
		<State id="h1"/>
		<State id="h2"/>
		<State id="h3"/>
		<State id="h4"/>
		<State id="h5"/>
	</States>
	<Transitions>
		<Transition source="h0" dest="h1" event="e1"/>
		<Transition source="h1" dest="h2" event="e2"/>
		<Transition source="h2" dest="h3" event="e3"/>
		<Transition source="h3" dest="h4" event="e2"/>
		<Transition source="h4" dest="h5" event="e3"/>
		<Transition source="h5" dest="h0" event="e4"/>
	</Transitions>
</Automaton>
<!-- Affix part i -->
<Automaton name="i">
	<Events>
		<Event id="e1" label="attch_ptA" controllable="true" prioritized="true"/>
		<Event id="e2" label="take_pt" controllable="true" prioritized="true"/>
		<Event id="e3" label="str_ptA" controllable="true" prioritized="true"/>
		<Event id="e4" label="cmpl_A" controllable="false" prioritized="true"/>
		<Event id="e5" label="ret_pt" controllable="false" prioritized="true"/>
		<Event id="e6" label="finA_attch" controllable="true" prioritized="true"/>
		<Event id="e7" label="attch_ptB" controllable="true" prioritized="true"/>
		<Event id="e8" label="str_ptB" controllable="true" prioritized="true"/>
		<Event id="e9" label="cmpl_B" controllable="false" prioritized="true"/>
		<Event id="e10" label="ret_pt" controllable="false" prioritized="true"/>
		<Event id="e11" label="finB_attch" controllable="true" prioritized="true"/>		
	</Events>
	<States>
		<State id="i0" initial="true" accepting="true"/>
		<State id="i1"/>
		<State id="i2"/>
		<State id="i3"/>
		<State id="i4"/>
		<State id="i5"/>
		<State id="i6"/>
		<State id="i7"/>
		<State id="i8"/>
		<State id="i9"/>
		<State id="i10"/>
	</States>
	<Transitions>
		<Transition source="i0" dest="i1" event="e1"/>
		<Transition source="i1" dest="i2" event="e2"/>
		<Transition source="i2" dest="i3" event="e3"/>
		<Transition source="i3" dest="i4" event="e4"/>
		<Transition source="i4" dest="i5" event="e5"/>
		<Transition source="i5" dest="i0" event="e6"/>
		<Transition source="i0" dest="i6" event="e7"/>
		<Transition source="i6" dest="i7" event="e2"/>
		<Transition source="i7" dest="i8" event="e8"/>
		<Transition source="i8" dest="i9" event="e9"/>
		<Transition source="i9" dest="i10" event="e10"/>
		<Transition source="i10" dest="i0" event="e11"/>
	</Transitions>
</Automaton>
</Automata>
