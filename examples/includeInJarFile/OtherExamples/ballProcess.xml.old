<?xml version="1.0" encoding="utf-8"?>
<Automata>
	<Automaton name="Progress spec: Gatekeeper (gk)" type="Specification">
		<Events>
			<Event id="gk.enter_ball" label="gk.enter_ball" controllable="true" prioritized="true" />
			<Event id="gk.has_ball" label="gk.has_ball" controllable="false" prioritized="true" />
			<Event id="gk.release_ball" label="gk.release_ball" controllable="true" prioritized="true" />
			<Event id="gk.ball_out_of_gatekeeper" label="gk.ball_out_of_gatekeeper" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />		
		</States>
		<Transitions>
			<Transition event="gk.enter_ball" source="q_0" dest="q_1" />
			<Transition event="gk.has_ball" source="q_1" dest="q_2" />
			<Transition event="gk.release_ball" source="q_2" dest="q_3" />
			<Transition event="gk.ball_out_of_gatekeeper" source="q_3" dest="q_0" />		
		</Transitions>
	</Automaton>
	<Automaton name="Progress spec: Elevate and measure (em)" type="Specification">
		<Events>
			<Event id="em.got_ball" label="em.got_ball" controllable="true" prioritized="true" />
			<Event id="em.timer_before_up.start" label="em.timer_before_up.start" controllable="true" prioritized="true" />
			<Event id="em.timer_before_up.timeout" label="em.timer_before_up.timeout" controllable="false" prioritized="true" />
			<Event id="em.elevator.allocate_station" label="em.elevator.allocate_station" controllable="true" prioritized="true" />
			<Event id="em.elevator.release_station" label="em.elevator.release_station" controllable="true" prioritized="true" />	
			<Event id="em.go_up" label="em.go_up" controllable="true" prioritized="true" />
			<Event id="em.is_up" label="em.is_up" controllable="false" prioritized="true" />
			<Event id="em.timer_before_measure.start" label="em.timer_before_measure.start" controllable="true" prioritized="true" />
			<Event id="em.timer_before_measure.timeout" label="em.timer_before_measure.timeout" controllable="false" prioritized="true" />
			<Event id="em.ball_measure_station" label="em.ball_measure_station" controllable="false" prioritized="true" />
			<Event id="em.request_measure" label="em.request_measure" controllable="true" prioritized="true" />
			<Event id="em.request_putter" label="em.request_putter" controllable="true" prioritized="true" />			
			<Event id="em.ball_out_of_measure_station" label="em.ball_out_of_measure_station" controllable="false" prioritized="true" />
			<Event id="em.go_down" label="em.go_down" controllable="true" prioritized="true" />
			<Event id="em.no_ball_measure_station" label="em.no_ball_measure_station" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3_1" />
			<State id="q_3" />
			<State id="q_4" />
			<State id="q_5_1" />			
			<State id="q_5" />
			<State id="q_6" />
			<State id="q_7" />
			<State id="q_8" />
			<State id="q_9" />
			<State id="q_11" />
			<State id="q_12_1" />
			<State id="q_12" />
			<State id="q_13" />
			<State id="q_14" />			
		</States>
		<Transitions>
			<Transition event="em.got_ball" source="q_0" dest="q_1" />
			<Transition event="em.timer_before_up.start" source="q_1" dest="q_2" />
			<Transition event="em.timer_before_up.timeout" source="q_2" dest="q_3_1" />
			<Transition event="em.elevator.allocate_station" source="q_3_1" dest="q_3" />			
			<Transition event="em.go_up" source="q_3" dest="q_4" />
			<Transition event="em.is_up" source="q_4" dest="q_5_1" />
			<Transition event="em.elevator.release_station" source="q_5_1" dest="q_5" />						
			<Transition event="em.timer_before_measure.start" source="q_5" dest="q_6" />
			<Transition event="em.timer_before_measure.timeout" source="q_6" dest="q_7" />
			<Transition event="em.ball_measure_station" source="q_7" dest="q_8" />
			<Transition event="em.request_measure" source="q_8" dest="q_9" />
			<Transition event="em.request_putter" source="q_9" dest="q_11" />
			<Transition event="em.ball_out_of_measure_station" source="q_11" dest="q_12_1" />
			<Transition event="em.elevator.allocate_station" source="q_12_1" dest="q_12" />						
			<Transition event="em.go_down" source="q_12" dest="q_13" />
			<Transition event="em.elevator.release_station" source="q_14" dest="q_0" />			
			<Transition event="em.elevator.release_station" source="q_5_1" dest="q_5" />									
			<Transition event="em.no_ball_measure_station" source="q_7" dest="q_12" />
		</Transitions>
	</Automaton>
	<Automaton name="Progress spec: Elevate and sort (es)" type="Specification">
		<Events>
			<Event id="es.is_down" label="es.is_down" controllable="true" prioritized="true" />
			<Event id="es.got_ball" label="es.got_ball" controllable="true" prioritized="true" />
			<Event id="es.timer_before_up.start" label="es.timer_before_up.start" controllable="true" prioritized="true" />
			<Event id="es.timer_before_up.timeout" label="es.timer_before_up.timeout" controllable="false" prioritized="true" />
			<Event id="es.up_lower" label="es.up_lower" controllable="true" prioritized="true" />
			<Event id="es.up_upper" label="es.up_upper" controllable="true" prioritized="true" />		
			<Event id="es.is_lower" label="es.is_lower" controllable="false" prioritized="true" />
			<Event id="es.is_upper" label="es.is_upper" controllable="false" prioritized="true" />
			<Event id="es.ball_lower_level" label="es.ball_lower_level" controllable="false" prioritized="true" />
			<Event id="es.no_ball_lower_level" label="es.no_ball_lower_level" controllable="false" prioritized="true" />
			<Event id="es.ball_upper_level" label="es.ball_upper_level" controllable="false" prioritized="true" />
			<Event id="es.no_ball_upper_level" label="es.no_ball_upper_level" controllable="false" prioritized="true" />
			<Event id="es.allocate_lower_buffer" label="es.allocate_lower_buffer" controllable="true" prioritized="true" />
			<Event id="es.release_lower_buffer" label="es.release_lower_buffer" controllable="true" prioritized="true" />
			<Event id="es.allocate_upper_buffer" label="es.allocate_upper_buffer" controllable="true" prioritized="true" />
			<Event id="es.release_upper_buffer" label="es.release_upper_buffer" controllable="true" prioritized="true" />
			<Event id="es.timer_before_put.start" label="es.timer_before_put.start" controllable="true" prioritized="true" />
			<Event id="es.timer_before_put.timeout" label="es.timer_before_put.timeout" controllable="false" prioritized="true" />
			<Event id="es.put_ball_lower" label="es.lower_putter.go_out" controllable="true" prioritized="true" />
			<Event id="es.put_ball_upper" label="es.upper_putter.go_out" controllable="true" prioritized="true" />
			<Event id="es.timer_before_deput.start" label="es.timer_before_deput.start" controllable="true" prioritized="true" />
			<Event id="es.timer_before_deput.timeout" label="es.timer_before_deput.timeout" controllable="false" prioritized="true" />
			<Event id="es.deput_ball_lower" label="es.lower_putter.go_in" controllable="true" prioritized="true" />
			<Event id="es.deput_ball_upper" label="es.upper_putter.go_in" controllable="true" prioritized="true" />
			<Event id="es.go_down" label="es.go_down" controllable="true" prioritized="true" />
			<Event id="es.is_not_down" label="es.is_not_down" controllable="true" prioritized="true" />
			<Event id="is_small_ball" label="is_small_ball" controllable="true" prioritized="true" />		
			<Event id="is_large_ball" label="is_large_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />
			<State id="q_4_lower" />
			<State id="q_5_lower" />
			<State id="q_6_lower" />
			<State id="q_7_lower" />
			<State id="q_8_lower" />
			<State id="q_8_lower_1" />
			<State id="q_9_lower" />
			<State id="q_10_lower" />
			<State id="q_11_lower" />
			<State id="q_4_upper" />
			<State id="q_5_upper" />
			<State id="q_6_upper" />
			<State id="q_7_upper" />
			<State id="q_8_upper" />
			<State id="q_8_upper_1" />
			<State id="q_9_upper" />
			<State id="q_10_upper" />
			<State id="q_11_upper" />
			<State id="q_12" />
		</States>
		<Transitions>
			<Transition event="es.is_down" source="q_0" dest="q_0" />
			<Transition event="es.got_ball" source="q_0" dest="q_1" />
			<Transition event="es.timer_before_up.start" source="q_1" dest="q_2" />
			<Transition event="es.timer_before_up.timeout" source="q_2" dest="q_3" />
			<Transition event="is_small_ball" source="q_3" dest="q_4_lower" />
			<Transition event="is_large_ball" source="q_3" dest="q_4_upper" />
			<Transition event="es.up_lower" source="q_4_lower" dest="q_5_lower" />		
			<Transition event="es.up_upper" source="q_4_upper" dest="q_5_upper" />	
			<Transition event="es.is_lower" source="q_5_lower" dest="q_6_lower" />
			<Transition event="es.is_upper" source="q_5_upper" dest="q_6_upper" />
			<Transition event="es.timer_before_put.start" source="q_6_lower" dest="q_7_lower" />
			<Transition event="es.timer_before_put.timeout" source="q_7_lower" dest="q_8_lower_1" />
			<Transition event="es.ball_lower_level" source="q_8_lower_1" dest="q_8_lower" />			
			<Transition event="es.no_ball_lower_level" source="q_8_lower_1" dest="q_12" />			
			<Transition event="es.timer_before_put.start" source="q_6_upper" dest="q_7_upper" />
			<Transition event="es.timer_before_put.timeout" source="q_7_upper" dest="q_8_upper_1" />
			<Transition event="es.ball_upper_level" source="q_8_upper_1" dest="q_8_upper" />			
			<Transition event="es.no_ball_upper_level" source="q_8_upper_1" dest="q_12" />	
			<Transition event="es.put_ball_lower" source="q_8_lower" dest="q_9_lower" />
			<Transition event="es.put_ball_upper" source="q_8_upper" dest="q_9_upper" />
			<Transition event="es.timer_before_deput.start" source="q_9_lower" dest="q_10_lower" />
			<Transition event="es.timer_before_deput.timeout" source="q_10_lower" dest="q_11_lower" />
			<Transition event="es.timer_before_deput.start" source="q_9_upper" dest="q_10_upper" />
			<Transition event="es.timer_before_deput.timeout" source="q_10_upper" dest="q_11_upper" />
			<Transition event="es.deput_ball_lower" source="q_11_lower" dest="q_12" />
			<Transition event="es.deput_ball_upper" source="q_11_upper" dest="q_12" />		
			<Transition event="es.go_down" source="q_12" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Progress spec: Arm (arm)" type="Specification">
		<Events>
			<Event id="arm.pickup_ball_lower" label="arm.pickup_ball_lower" controllable="true" prioritized="true" />
			<Event id="arm.pickup_ball_upper" label="arm.pickup_ball_upper" controllable="true" prioritized="true" />
			<Event id="arm.up_lower" label="arm.up_lower" controllable="true" prioritized="true" />
			<Event id="arm.up_upper" label="arm.up_upper" controllable="true" prioritized="true" />
			<Event id="arm.is_lower" label="arm.is_lower" controllable="false" prioritized="true" />
			<Event id="arm.is_upper" label="arm.is_upper" controllable="false" prioritized="true" />
			<Event id="arm.allocate_lower_buffer" label="arm.allocate_lower_buffer" controllable="true" prioritized="true" />
			<Event id="arm.allocate_upper_buffer" label="arm.allocate_upper_buffer" controllable="true" prioritized="true" />
			<Event id="arm.release_lower_buffer" label="arm.release_lower_buffer" controllable="true" prioritized="true" />
			<Event id="arm.release_upper_buffer" label="arm.release_upper_buffer" controllable="true" prioritized="true" />
			<Event id="arm.raise_lower_buffer" label="arm.raise_lower_buffer" controllable="true" prioritized="true" />
			<Event id="arm.raise_upper_buffer" label="arm.raise_upper_buffer" controllable="true" prioritized="true" />
			<Event id="arm.create_vacuum" label="arm.create_vacuum" controllable="true" prioritized="true" />
			<Event id="arm.ball_contact" label="arm.ball_contact" controllable="false" prioritized="true" />
			<Event id="arm.lower_lower_buffer" label="arm.lower_lower_buffer" controllable="true" prioritized="true" />
			<Event id="arm.timer.before_turnleft.start" label="arm.timer.before_turnleft.start" controllable="true" prioritized="true" />
			<Event id="arm.timer.before_turnleft.timeout" label="arm.timer.before_turnleft.timeout" controllable="false" prioritized="true" />
			<Event id="arm.lower_upper_buffer" label="arm.lower_upper_buffer" controllable="true" prioritized="true" />
			<Event id="arm.go_home" label="arm.go_home" controllable="true" prioritized="true" />
			<Event id="arm.is_home" label="arm.is_home" controllable="false" prioritized="true" />
			<Event id="arm.release_ball" label="arm.release_ball" controllable="true" prioritized="true" />
			<Event id="lb.get_ball" label="lb.get_ball" controllable="true" prioritized="true" />
			<Event id="ub.get_ball" label="ub.get_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_5" />
			<State id="q_6" />
			<State id="q_5_1" />
			<State id="q_6_1" />
			<State id="q_7" />
			<State id="q_8" />
			<State id="q_9" />
			<State id="q_10" />
			<State id="q_11" />
			<State id="q_12" />
			<State id="q_13" />
			<State id="q_13_1" />		
			<State id="q_13_2" />	
			<State id="q_13_3" />		
			<State id="q_13_4" />	
			<State id="q_14" />
			<State id="q_15" />
			<State id="q_17" />
			<State id="q_19" />
			<State id="q_16" />
			<State id="q_18" />
		</States>
		<Transitions>
			<Transition event="arm.pickup_ball_lower" source="q_0" dest="q_1" />
			<Transition event="arm.pickup_ball_upper" source="q_0" dest="q_2" />
			<Transition event="arm.up_lower" source="q_1" dest="q_5_1" />
			<Transition event="arm.up_upper" source="q_2" dest="q_6_1" />
			<Transition event="arm.is_lower" source="q_5_1" dest="q_5" />
			<Transition event="arm.is_upper" source="q_6_1" dest="q_6" />
			<Transition event="arm.allocate_lower_buffer" source="q_5" dest="q_7" />
			<Transition event="arm.allocate_upper_buffer" source="q_6" dest="q_8" />
			<Transition event="arm.raise_lower_buffer" source="q_7" dest="q_9" />
			<Transition event="arm.raise_upper_buffer" source="q_8" dest="q_10" />
			<Transition event="arm.create_vacuum" source="q_9" dest="q_11" />
			<Transition event="arm.create_vacuum" source="q_10" dest="q_12" />
			<Transition event="arm.ball_contact" source="q_11" dest="q_13" />
			<Transition event="arm.ball_contact" source="q_12" dest="q_14" />
			<Transition event="arm.lower_lower_buffer" source="q_13" dest="q_13_1" />
			<Transition event="lb.get_ball" source="q_13_1" dest="q_13_3" />
			<Transition event="ub.get_ball" source="q_13_2" dest="q_13_4" />
			<Transition event="arm.release_lower_buffer" source="q_13_3" dest="q_15" />
			<Transition event="arm.release_upper_buffer" source="q_13_4" dest="q_15" />						
			<Transition event="arm.timer.before_turnleft.start" source="q_15" dest="q_17" />
			<Transition event="arm.timer.before_turnleft.timeout" source="q_17" dest="q_19" />
			<Transition event="arm.lower_upper_buffer" source="q_14" dest="q_13_2" />
			<Transition event="arm.go_home" source="q_19" dest="q_16" />
			<Transition event="arm.is_home" source="q_16" dest="q_18" />
			<Transition event="arm.release_ball" source="q_18" dest="q_0" />
		</Transitions>
	</Automaton>	
	<Automaton name="Progress spec: Measure station - measure" type="Specification">
		<Events>
			<Event id="em.request_measure" label="em.request_measure" controllable="true" prioritized="true" />
			<Event id="em.start_measure" label="em.start_measure" controllable="true" prioritized="true" />
			<Event id="em.timer_measure.start" label="em.timer_measure.start" controllable="true" prioritized="true" />
			<Event id="em.timer_measure.timeout" label="em.timer_measure.timeout" controllable="false" prioritized="true" />
			<Event id="em.small_ball" label="em.small_ball" controllable="false" prioritized="true" />
			<Event id="em.large_ball" label="em.large_ball" controllable="false" prioritized="true" />
			<Event id="em.stop_measure" label="em.stop_measure" controllable="true" prioritized="true" />
			<Event id="em.measure.allocate_station" label="em.measure.allocate_station" controllable="true" prioritized="true" />
			<Event id="em.measure.release_station" label="em.measure.release_station" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_0_1" accepting="false" />
			<State id="q_0_2" accepting="false" />
			<State id="q_1" accepting="false" />
			<State id="q_2" accepting="false" />
			<State id="q_3" accepting="false" />
			<State id="q_4" accepting="false" />
			<State id="q_5" accepting="false" />
		</States>
		<Transitions>
			<Transition event="em.request_measure" source="q_0" dest="q_0_1" />
			<Transition event="em.measure.allocate_station" source="q_0_1" dest="q_0_2" />
			<Transition event="em.start_measure" source="q_0_1" dest="q_1" />
			<Transition event="em.timer_measure.start" source="q_1" dest="q_2" />
			<Transition event="em.timer_measure.timeout" source="q_2" dest="q_3" />
			<Transition event="em.small_ball" source="q_3" dest="q_4" />
			<Transition event="em.large_ball" source="q_3" dest="q_4" />
			<Transition event="em.stop_measure" source="q_4" dest="q_5" />
			<Transition event="em.measure.release_station" source="q_5" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Progress spec: Measure station - putter" type="Specification">
		<Events>
			<Event id="em.request_putter" label="em.request_putter" controllable="true" prioritized="true" />
			<Event id="em.start_put" label="em.start_putter" controllable="true" prioritized="true" />
			<Event id="em.stop_put" label="em.stop_putter" controllable="true" prioritized="true" />
			<Event id="em.putter.allocate_station" label="em.putter.allocate_station" controllable="true" prioritized="true" />
			<Event id="em.putter.release_station" label="em.putter.release_station" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="false" />
			<State id="q_2" accepting="false" />
			<State id="q_4" accepting="false" />
			<State id="q_5" accepting="false" />
		</States>
		<Transitions>
			<Transition event="em.request_putter" source="q_0" dest="q_1" />
			<Transition event="em.putter.allocate_station" source="q_1" dest="q_2" />
			<Transition event="em.start_put" source="q_2" dest="q_4" />
			<Transition event="em.stop_put" source="q_4" dest="q_5" />
			<Transition event="em.putter.release_station" source="q_5" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Manual button" type="Plant">
		<Events>
			<Event id="manual_button_pressed" label="manual_button_pressed" controllable="false" prioritized="true" />
			<Event id="start_manual_mode" label="start_manual_mode" controllable="true" prioritized="true" />
			<Event id="manual_button_released" label="manual_button_released" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true" />
			<State id="q_2" accepting="true" />
		</States>
		<Transitions>
			<Transition event="manual_button_pressed" source="q_0" dest="q_1" />
			<Transition event="start_manual_mode" source="q_1" dest="q_2" />
			<Transition event="manual_button_released" source="q_2" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Extended Plant: GK and EM" type="Plant">
		<Events>
			<Event id="gk.release_ball" label="gk.release_ball" controllable="true" prioritized="true" />
			<Event id="em.got_ball" label="em.got_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true" />
		</States>
		<Transitions>
			<Transition event="gk.release_ball" source="q_0" dest="q_1" />
			<Transition event="em.got_ball" source="q_1" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Extended Plant: EM and ES" type="Plant">
		<Events>
			<Event id="em.release_ball" label="em.release_ball" controllable="true" prioritized="true" />
			<Event id="es.got_ball" label="es.got_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true" />
		</States>
		<Transitions>
			<Transition event="em.release_ball" source="q_0" dest="q_1" />
			<Transition event="es.got_ball" source="q_1" dest="q_0" />
		</Transitions>
	</Automaton>
	
	<!-- -->
	<!-- Here comes all new plant automata -->
	<!-- -->
	
	<Automaton name="Plant: Elevator - Measure" type="Plant">
		<Events>
			<Event id="go_down" label="elevator.measure.go_down" controllable="true" prioritized="true" />
			<Event id="go_up" label="elevator.measure.go_up" controllable="true" prioritized="true" />
			<Event id="is_up" label="elevator.measure.is_up" controllable="true" prioritized="true" />
			<Event id="is_down" label="elevator.measure.is_down" controllable="true" prioritized="true" />
			<Event id="is_not_up" label="elevator.measure.is_not_up" controllable="true" prioritized="true" />
			<Event id="is_not_down" label="elevator.measure.is_not_down" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" name="down" initial="true" accepting="true" />
			<State id="q_1" name="up" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_down" source="q_0" dest="q_0" />
			<Transition event="go_up" source="q_1" dest="q_1" />
			<Transition event="go_up" source="q_0" dest="q_1" />
			<Transition event="go_down" source="q_1" dest="q_0" />
			<Transition event="is_up" source="q_1" dest="q_1" />
			<Transition event="is_down" source="q_0" dest="q_0" />
			<Transition event="is_not_down" source="q_1" dest="q_1" />
			<Transition event="is_not_up" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Elevator - Sorter" type="Plant">
		<Events>
			<Event id="go_down" label="elevator.sorter.go_down" />
			<Event id="go_upper" label="elevator.sorter.go_upper" />
			<Event id="go_lower" label="elevator.sorter.go_lower" />
			<Event id="is_upper" label="elevator.sorter.is_upper" />
			<Event id="is_lower" label="elevator.sorter.is_lower" />
			<Event id="is_down" label="elevator.sorter.is_down" />
		</Events>
		<States>
			<State id="q_0" name="down" initial="true" accepting="true" />
			<State id="q_1" name="upper" accepting="true" />
			<State id="q_2" name="lower" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_down" source="q_0" dest="q_0" />
			<Transition event="go_upper" source="q_1" dest="q_1" />
			<Transition event="go_upper" source="q_0" dest="q_1" />
			<Transition event="go_lower" source="q_2" dest="q_2" />
			<Transition event="go_lower" source="q_0" dest="q_2" />
			<Transition event="go_down" source="q_1" dest="q_0" />
			<Transition event="go_down" source="q_2" dest="q_0" />			
			<Transition event="is_lower" source="q_2" dest="q_2" />
			<Transition event="is_upper" source="q_1" dest="q_1" />	
			<Transition event="is_down" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Measure" type="Plant">
		<Events>
			<Event id="go_in" label="measure.go_in" />
			<Event id="go_out" label="measure.go_out" />
			<Event id="is_out" label="measure.is_out" />
			<Event id="is_in" label="measure.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>	
	<Automaton name="Plant: Putter - Measure" type="Plant">
		<Events>
			<Event id="go_in" label="putter.measure.go_in" />
			<Event id="go_out" label="putter.measure.go_out" />
			<Event id="is_out" label="putter.measure.is_out" />
			<Event id="is_in" label="putter.measure.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Putter - Lower sorter" type="Plant">
		<Events>
			<Event id="go_in" label="putter.lower_sorter.go_in" />
			<Event id="go_out" label="putter.lower_sorter.go_out" />
			<Event id="is_out" label="putter.lower_sorter.is_out" />
			<Event id="is_in" label="putter.lower_sorter.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Putter - Upper sorter" type="Plant">
		<Events>
			<Event id="go_in" label="putter.upper_sorter.go_in" />
			<Event id="go_out" label="putter.upper_sorter.go_out" />
			<Event id="is_out" label="putter.upper_sorter.is_out" />
			<Event id="is_in" label="putter.upper_sorter.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Arm" type="Plant">
		<Events>
			<Event id="go_down" label="arm.go_down" />
			<Event id="go_upper" label="arm.go_upper" />
			<Event id="go_lower" label="arm.go_lower" />
			<Event id="is_upper" label="arm.is_upper" />
			<Event id="is_lower" label="arm.is_lower" />
			<Event id="is_down" label="arm.is_down" />
		</Events>
		<States>
			<State id="q_0" name="down" initial="true" accepting="true" />
			<State id="q_1" name="upper" accepting="true" />
			<State id="q_2" name="lower" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_down" source="q_0" dest="q_0" />
			<Transition event="go_upper" source="q_1" dest="q_1" />
			<Transition event="go_upper" source="q_0" dest="q_1" />
			<Transition event="go_lower" source="q_2" dest="q_2" />
			<Transition event="go_lower" source="q_0" dest="q_2" />
			<Transition event="go_down" source="q_1" dest="q_0" />
			<Transition event="go_down" source="q_2" dest="q_0" />			
			<Transition event="is_lower" source="q_2" dest="q_2" />
			<Transition event="is_upper" source="q_1" dest="q_1" />	
			<Transition event="is_down" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Gatekeeper - In" type="Plant">
		<Events>
			<Event id="go_in" label="gk.in.go_in" />
			<Event id="go_out" label="gk.in.go_out" />
			<Event id="is_out" label="gk.in.is_out" />
			<Event id="is_in" label="gk.in.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Gatekeeper - Out" type="Plant">
		<Events>
			<Event id="go_in" label="gk.out.go_in" />
			<Event id="go_out" label="gk.out.go_out" />
			<Event id="is_out" label="gk.out.is_out" />
			<Event id="is_in" label="gk.out.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Lift - Lower" type="Plant">
		<Events>
			<Event id="go_in" label="lift.lower.go_in" />
			<Event id="go_out" label="lift.lower.go_out" />
			<Event id="is_out" label="lift.lower.is_out" />
			<Event id="is_in" label="lift.lower.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Lift - Upper" type="Plant">
		<Events>
			<Event id="go_in" label="lift.upper.go_in" />
			<Event id="go_out" label="lift.upper.go_out" />
			<Event id="is_out" label="lift.upper.is_out" />
			<Event id="is_in" label="lift.upper.is_in" />
		</Events>
		<States>
			<State id="q_0" name="in" initial="true" accepting="true" />
			<State id="q_1" name="out" accepting="true" />
		</States>
		<Transitions>
			<Transition event="go_in" source="q_0" dest="q_0" />
			<Transition event="go_out" source="q_1" dest="q_1" />
			<Transition event="go_out" source="q_0" dest="q_1" />
			<Transition event="go_in" source="q_1" dest="q_0" />
			<Transition event="is_out" source="q_1" dest="q_1" />
			<Transition event="is_in" source="q_0" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Plant: Disable events" type="Plant">
		<Events>
			<Event id="e0" label="lift.upper.is_in" />
			<Event id="e1" label="lift.upper.is_out" />
			<Event id="e2" label="lift.lower.is_in" />
			<Event id="e3" label="lift.lower.is_out" />
			<Event id="e4" label="gk.in.is_in" />
			<Event id="e5" label="gk.in.is_out" />
			<Event id="e6" label="gk.out.is_in" />
			<Event id="e7" label="gk.out.is_out" />
		</Events>
		<States>
		</States>
		<Transitions>
		</Transitions>
	</Automaton>
	<!-- -->
	<!-- End of new plant automata -->
	<!-- -->
	<Automaton name="Automatic button" type="Plant">
		<Events>
			<Event id="automatic_button_pressed" label="automatic_button_pressed" controllable="false" prioritized="true" />
			<Event id="start_automatic_mode" label="start_automatic_mode" controllable="true" prioritized="true" />
			<Event id="automatic_button_released" label="automatic_button_released" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true" />
			<State id="q_2" accepting="true" />
		</States>
		<Transitions>
			<Transition event="automatic_button_pressed" source="q_0" dest="q_1" />
			<Transition event="start_automatic_mode" source="q_1" dest="q_2" />
			<Transition event="automatic_button_released" source="q_2" dest="q_0" />
		</Transitions>
	</Automaton>		
	<Automaton name="Safety spec: One ball at a time">
		<Events>
			<Event id="gk.release_ball" label="gk.release_ball" controllable="true" prioritized="true" />
			<Event id="arm.release_ball" label="arm.release_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
		</States>
		<Transitions>
			<Transition event="gk.release_ball" source="q_0" dest="q_1" />
			<Transition event="arm.release_ball" source="q_1" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Safety spec: Lower buffer" type="Specification">
		<Events>
			<Event id="lb.add_ball" label="lb.add_ball" controllable="true" prioritized="true" />
			<Event id="lb.get_ball" label="lb.get_ball" controllable="true" prioritized="true" />
			<Event id="lb.has_ball" label="lb.has_ball" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1"/>
			<State id="q_2"/>
			<State id="q_3"/>
			<State id="q_4"/>
			<State id="q_5"/>
		</States>
		<Transitions>
			<Transition event="lb.add_ball" source="q_0" dest="q_1" />
			<Transition event="lb.add_ball" source="q_1" dest="q_2" />
			<Transition event="lb.add_ball" source="q_2" dest="q_3" />
			<Transition event="lb.add_ball" source="q_3" dest="q_4" />
			<Transition event="lb.add_ball" source="q_4" dest="q_5" />
			<Transition event="lb.get_ball" source="q_1" dest="q_0" />
			<Transition event="lb.get_ball" source="q_2" dest="q_1" />
			<Transition event="lb.get_ball" source="q_3" dest="q_2" />
			<Transition event="lb.get_ball" source="q_4" dest="q_3" />
			<Transition event="lb.get_ball" source="q_5" dest="q_4" />
			<Transition event="lb.has_ball" source="q_1" dest="q_1" />
			<Transition event="lb.has_ball" source="q_2" dest="q_2" />
			<Transition event="lb.has_ball" source="q_3" dest="q_3" />
			<Transition event="lb.has_ball" source="q_4" dest="q_4" />
			<Transition event="lb.has_ball" source="q_5" dest="q_5" />			
		</Transitions>
	</Automaton>
	<Automaton name="Safety spec: Upper buffer" type="Specification">
		<Events>
			<Event id="ub.add_ball" label="ub.add_ball" controllable="true" prioritized="true" />
			<Event id="ub.get_ball" label="ub.get_ball" controllable="true" prioritized="true" />
			<Event id="ub.has_ball" label="ub.has_ball" controllable="false" prioritized="true" />			
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true" />
			<State id="q_2" accepting="true" />
			<State id="q_3" accepting="true" />
			<State id="q_4" accepting="true" />
			<State id="q_5" accepting="true" />
		</States>
		<Transitions>
			<Transition event="ub.add_ball" source="q_0" dest="q_1" />
			<Transition event="ub.add_ball" source="q_1" dest="q_2" />
			<Transition event="ub.add_ball" source="q_2" dest="q_3" />
			<Transition event="ub.add_ball" source="q_3" dest="q_4" />
			<Transition event="ub.add_ball" source="q_4" dest="q_5" />
			<Transition event="ub.get_ball" source="q_1" dest="q_0" />
			<Transition event="ub.get_ball" source="q_2" dest="q_1" />
			<Transition event="ub.get_ball" source="q_3" dest="q_2" />
			<Transition event="ub.get_ball" source="q_4" dest="q_3" />
			<Transition event="ub.get_ball" source="q_5" dest="q_4" />
			<Transition event="ub.has_ball" source="q_1" dest="q_1" />
			<Transition event="ub.has_ball" source="q_2" dest="q_2" />
			<Transition event="ub.has_ball" source="q_3" dest="q_3" />
			<Transition event="ub.has_ball" source="q_4" dest="q_4" />
			<Transition event="ub.has_ball" source="q_5" dest="q_5" />
		</Transitions>
	</Automaton>
	<Automaton name="Progress spec: Manual or automatic mode" type="Specification">
		<Events>
			<Event id="start_automatic_mode" label="start_automatic_mode" controllable="true" prioritized="true" />
			<Event id="start_manual_mode" label="start_manual_mode" controllable="true" prioritized="true" />
			<Event id="gk.release_ball" label="gk.release_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />
			<State id="q_4" />
			<State id="q_5" />
			<State id="q_6" />
			<State id="q_7" />
		</States>
		<Transitions>
			<Transition event="start_automatic_mode" source="q_0" dest="q_2" />
			<Transition event="start_manual_mode" source="q_0" dest="q_1" />
			<Transition event="gk.release_ball" source="q_1" dest="q_0" />
			<Transition event="gk.release_ball" source="q_2" dest="q_3" />
			<Transition event="gk.release_ball" source="q_3" dest="q_4" />
			<Transition event="gk.release_ball" source="q_4" dest="q_5" />
			<Transition event="gk.release_ball" source="q_5" dest="q_6" />
			<Transition event="gk.release_ball" source="q_6" dest="q_7" />
			<Transition event="gk.release_ball" source="q_7" dest="q_0" />
		</Transitions>
	</Automaton>	
	<Automaton name="Progress spec: Pickup balls">
		<Events>
			<Event id="lb.has_ball" label="lb.has_ball" controllable="false" prioritized="true" />
			<Event id="arm.pickup_ball_lower" label="arm.pickup_ball_lower" controllable="true" prioritized="true" />
			<Event id="ub.has_ball" label="ub.has_ball" controllable="false" prioritized="true" />
			<Event id="arm.pickup_ball_upper" label="arm.pickup_ball_upper" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
		</States>
		<Transitions>
			<Transition event="lb.has_ball" source="q_0" dest="q_1" />
			<Transition event="arm.pickup_ball_lower" source="q_1" dest="q_0" />
			<Transition event="ub.has_ball" source="q_0" dest="q_2" />
			<Transition event="arm.pickup_ball_upper" source="q_2" dest="q_0" />
		</Transitions>
	</Automaton>	
	<Automaton name="Variable: size of ball" type="Specification">
		<Events>
			<Event id="em.small_ball" label="em.small_ball" controllable="false" prioritized="true" />
			<Event id="em.large_ball" label="em.large_ball" controllable="false" prioritized="true" />
			<Event id="is_large_ball" label="is_large_ball" controllable="true" prioritized="true" />
			<Event id="is_small_ball" label="is_small_ball" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true" />
			<State id="q_2" accepting="true" />
		</States>
		<Transitions>
			<Transition event="em.small_ball" source="q_0" dest="q_2" />
			<Transition event="em.large_ball" source="q_0" dest="q_1" />
			<Transition event="em.large_ball" source="q_2" dest="q_1" />
			<Transition event="em.small_ball" source="q_1" dest="q_2" />
			<Transition event="is_large_ball" source="q_1" dest="q_1" />
			<Transition event="is_small_ball" source="q_2" dest="q_2" />
		</Transitions>
	</Automaton>
	<Automaton name="Interaction spec: GK and EM" type="Specification">
		<Events>
			<Event id="em.is_down" label="em.is_down" controllable="true" prioritized="true" />
			<Event id="gk.release_ball" label="gk.release_ball" controllable="true" prioritized="true" />
			<Event id="em.is_not_down" label="em.is_not_down" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
		</States>
		<Transitions>
			<Transition event="em.is_down" source="q_0" dest="q_1" />
			<Transition event="gk.release_ball" source="q_1" dest="q_2" />
			<Transition event="em.is_not_down" source="q_2" dest="q_0" />
		</Transitions>
	</Automaton>	
	<Automaton name="Interaction spec: EM and ES" type="Specification">
		<Events>
			<Event id="es.is_down" label="es.is_down" controllable="true" prioritized="true" />
			<Event id="em.is_small" label="em.is_small" controllable="false" prioritized="true" />
			<Event id="em.is_large" label="em.is_large" controllable="false" prioritized="true" />
			<Event id="es.go_lower" label="es.go_lower" controllable="true" prioritized="true" />
			<Event id="es.go_upper" label="es.go_upper" controllable="true" prioritized="true" />
			<Event id="es.is_not_down" label="es.is_not_down" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />
			<State id="q_4" />
		</States>
		<Transitions>
			<Transition event="es.is_down" source="q_0" dest="q_1" />
			<Transition event="em.is_small" source="q_1" dest="q_2" />
			<Transition event="em.is_large" source="q_1" dest="q_3" />
			<Transition event="es.go_lower" source="q_2" dest="q_4" />
			<Transition event="es.go_upper" source="q_3" dest="q_4" />
			<Transition event="es.is_not_down" source="q_4" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Interaction spec: ES and P (lower level)" type="Specification">
		<Events>
			<Event id="arm.allocate_lower_buffer" label="arm.allocate_lower_buffer" controllable="true" prioritized="true" />
			<Event id="arm.release_lower_buffer" label="arm.release_lower_buffer" controllable="true" prioritized="true" />
			<Event id="es.allocate_lower_buffer" label="es.allocate_lower_buffer" controllable="true" prioritized="true" />
			<Event id="es.release_lower_buffer" label="es.release_lower_buffer" controllable="true" prioritized="true" />
			<Event id="es.lower_putter.go_out" label="es.lower_putter.go_out" controllable="true" prioritized="true" />
			<Event id="es.lower_putter.go_in" label="es.lower_putter.go_in" controllable="true" prioritized="true" />
			<Event id="arm.raise_lower_buffer" label="arm.raise_lower_buffer" controllable="true" prioritized="true" />
			<Event id="arm.lower_lower_buffer" label="arm.lower_lower_buffer" controllable="true" prioritized="true" />

		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
		</States>
		<Transitions>
			<Transition event="arm.allocate_lower_buffer" source="q_0" dest="q_1" />
			<Transition event="arm.release_lower_buffer" source="q_1" dest="q_0" />
			<Transition event="es.allocate_lower_buffer" source="q_0" dest="q_2" />
			<Transition event="es.release_lower_buffer" source="q_2" dest="q_0" />
			<Transition event="arm.raise_lower_buffer" source="q_1" dest="q_1" />			
			<Transition event="arm.lower_lower_buffer" source="q_1" dest="q_1" />				
			<Transition event="es.lower_putter.go_out" source="q_2" dest="q_2" />			
			<Transition event="es.lower_putter.go_in" source="q_2" dest="q_2" />	
		</Transitions>
	</Automaton>
	<Automaton name="Interaction spec: ES and P (upper level)" type="Specification">
		<Events>
			<Event id="arm.allocate_upper_buffer" label="arm.allocate_upper_buffer" controllable="true" prioritized="true" />
			<Event id="arm.release_upper_buffer" label="arm.release_upper_buffer" controllable="true" prioritized="true" />
			<Event id="es.allocate_upper_buffer" label="es.allocate_upper_buffer" controllable="true" prioritized="true" />
			<Event id="es.release_upper_buffer" label="es.release_upper_buffer" controllable="true" prioritized="true" />
			<Event id="es.upper_putter.go_out" label="es.upper_putter.go_out" controllable="true" prioritized="true" />
			<Event id="es.upper_putter.go_in" label="es.upper_putter.go_in" controllable="true" prioritized="true" />
			<Event id="arm.raise_upper_buffer" label="arm.raise_upper_buffer" controllable="true" prioritized="true" />
			<Event id="arm.lower_upper_buffer" label="arm.lower_upper_buffer" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
		</States>
		<Transitions>
			<Transition event="arm.allocate_upper_buffer" source="q_0" dest="q_1" />
			<Transition event="arm.release_upper_buffer" source="q_1" dest="q_0" />
			<Transition event="es.allocate_upper_buffer" source="q_0" dest="q_2" />
			<Transition event="es.release_upper_buffer" source="q_2" dest="q_0" />
			<Transition event="arm.raise_upper_buffer" source="q_1" dest="q_1" />			
			<Transition event="arm.lower_upper_buffer" source="q_1" dest="q_1" />				
			<Transition event="es.upper_putter.go_out" source="q_2" dest="q_2" />			
			<Transition event="es.upper_putter.go_in" source="q_2" dest="q_2" />			
		</Transitions>
	</Automaton>
	<Automaton name="Interaction spec: P and buffers" type="Specification">
		<Events>
			<Event id="arm.has_ball_lower" label="arm.has_ball_lower" controllable="false" prioritized="true" />
			<Event id="arm.pickup_ball_lower" label="arm.pickup_ball_lower" controllable="true" prioritized="true" />
			<Event id="arm.has_ball_upper" label="arm.has_ball_upper" controllable="false" prioritized="true" />
			<Event id="arm.pick_ball_upper" label="arm.pick_ball_upper" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
		</States>
		<Transitions>
			<Transition event="arm.has_ball_lower" source="q_0" dest="q_1" />
			<Transition event="arm.pickup_ball_lower" source="q_1" dest="q_0" />
			<Transition event="arm.has_ball_upper" source="q_0" dest="q_2" />
			<Transition event="arm.pick_ball_upper" source="q_2" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Interaction spec: Measure station" type="Specification">
		<Events>
			<Event id="em.measure.allocate_station" label="em.measure.allocate_station" controllable="true" prioritized="true" />
			<Event id="em.measure.release_station" label="em.measure.release_station" controllable="true" prioritized="true" />
			<Event id="em.putter.allocate_station" label="em.putter.allocate_station" controllable="true" prioritized="true" />
			<Event id="em.putter.release_station" label="em.putter.release_station" controllable="true" prioritized="true" />
			<Event id="em.elevator.allocate_station" label="em.elevator.allocate_station" controllable="true" prioritized="true" />
			<Event id="em.elevator.release_station" label="em.elevator.release_station" controllable="true" prioritized="true" />
			<Event id="em.start_measure" label="em.start_measure" controllable="true" prioritized="true" />
			<Event id="em.stop_measure" label="em.stop_measure" controllable="true" prioritized="true" />
			<Event id="em.start_put" label="em.start_put" controllable="true" prioritized="true" />
			<Event id="em.stop_put" label="em.stop_put" controllable="true" prioritized="true" />
			<Event id="em.go_up" label="em.go_up" controllable="true" prioritized="true" />
			<Event id="em.go_down" label="em.go_down" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />			
		</States>
		<Transitions>
			<Transition event="em.measure.allocate_station" source="q_0" dest="q_1" />
			<Transition event="em.measure.release_station" source="q_1" dest="q_0" />
			<Transition event="em.putter.allocate_station" source="q_0" dest="q_2" />
			<Transition event="em.putter.release_station" source="q_2" dest="q_0" />
			<Transition event="em.elevator.allocate_station" source="q_0" dest="q_3" />
			<Transition event="em.elevator.release_station" source="q_3" dest="q_0" />
			<Transition event="em.start_measure" source="q_1" dest="q_1" />
			<Transition event="em.stop_measure" source="q_1" dest="q_1" />			
			<Transition event="em.start_put" source="q_2" dest="q_2" />
			<Transition event="em.stop_put" source="q_2" dest="q_2" />	
			<Transition event="em.go_up" source="q_3" dest="q_3" />
			<Transition event="em.go_down" source="q_3" dest="q_3" />
		</Transitions>
	</Automaton>
	<Automaton name="measure_station_safety_2" type="Specification">
		<Events>
			<Event id="em.start_measure" label="em.start_measure" controllable="true" prioritized="true" />
			<Event id="em.stop_measure" label="em.stop_measure" controllable="true" prioritized="true" />
			<Event id="em.start_put" label="em.start_put" controllable="true" prioritized="true" />
			<Event id="em.stop_put" label="em.stop_put" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
		</States>
		<Transitions>
			<Transition event="em.start_measure" source="q_0" dest="q_1" />
			<Transition event="em.stop_measure" source="q_1" dest="q_0" />
			<Transition event="em.start_put" source="q_0" dest="q_2" />
			<Transition event="em.stop_put" source="q_2" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="spec_elevator_put" type="Specification">
		<Events>
			<Event id="em.request_go_up" label="em.request_go_up" controllable="true" prioritized="true" />
			<Event id="em.start_put" label="em.start_put" controllable="true" prioritized="true" />
			<Event id="em.stop_put" label="em.stop_put" controllable="true" prioritized="true" />
			<Event id="em.put_is_in" label="em.put_is_in" controllable="true" prioritized="true" />
			<Event id="em.go_up" label="em.go_up" controllable="true" prioritized="true" />
			<Event id="em.is_up" label="em.is_up" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />
		</States>
		<Transitions>
			<Transition event="em.request_go_up" source="q_0" dest="q_1" />
			<Transition event="em.start_put" source="q_0" dest="q_0" />
			<Transition event="em.stop_put" source="q_0" dest="q_0" />
			<Transition event="em.start_put" source="q_1" dest="q_1" />
			<Transition event="em.stop_put" source="q_1" dest="q_1" />
			<Transition event="em.put_is_in" source="q_1" dest="q_2" />
			<Transition event="em.go_up" source="q_2" dest="q_3" />
			<Transition event="em.is_up" source="q_3" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="spec_elevator_measure" type="Specification">
		<Events>
			<Event id="em.request_go_up" label="em.request_go_up" controllable="true" prioritized="true" />
			<Event id="em.start_measure" label="em.start_measure" controllable="true" prioritized="true" />
			<Event id="em.stop_measure" label="em.stop_measure" controllable="true" prioritized="true" />
			<Event id="em.measure_is_in" label="em.measure_is_in" controllable="true" prioritized="true" />
			<Event id="em.go_up" label="em.go_up" controllable="true" prioritized="true" />
			<Event id="em.is_up" label="em.is_up" controllable="true" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" />
			<State id="q_2" />
			<State id="q_3" />
		</States>
		<Transitions>
			<Transition event="em.request_go_up" source="q_0" dest="q_1" />
			<Transition event="em.start_measure" source="q_0" dest="q_0" />
			<Transition event="em.stop_measure" source="q_0" dest="q_0" />
			<Transition event="em.start_measure" source="q_1" dest="q_1" />
			<Transition event="em.stop_measure" source="q_1" dest="q_1" />
			<Transition event="em.measure_is_in" source="q_1" dest="q_2" />
			<Transition event="em.go_up" source="q_2" dest="q_3" />
			<Transition event="em.is_up" source="q_3" dest="q_0" />
		</Transitions>
	</Automaton>
	<Automaton name="Timer: em.timer.before_up" type="Plant">
		<Events>
			<Event id="em.timer.before_up.start" label="em.timer.before_up.start" controllable="true" prioritized="true" />
			<Event id="em.timer.before_up.timeout" label="em.timer.before_up.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="em.timer.before_up.start" source="q_0" dest="q_1" />
			<Transition event="em.timer.before_up.start" source="q_1" dest="q_1" />
			<Transition event="em.timer.before_up.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: em.timer.before_ballcheck" type="Plant">
		<Events>
			<Event id="em.timer.before_ballcheck.start" label="em.timer.before_ballcheck.start" controllable="true" prioritized="true" />
			<Event id="em.timer.before_ballcheck.timeout" label="em.timer.before_ballcheck.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="em.timer.before_ballcheck.start" source="q_0" dest="q_1" />
			<Transition event="em.timer.before_ballcheck.start" source="q_1" dest="q_1" />			
			<Transition event="em.timer.before_ballcheck.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: em.timer.measure" type="Plant">
		<Events>
			<Event id="em.timer.measure.start" label="em.timer.measure.start" controllable="true" prioritized="true" />
			<Event id="em.timer.measure.timeout" label="em.timer.measure.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="em.timer.measure.start" source="q_0" dest="q_1" />
			<Transition event="em.timer.measure.start" source="q_1" dest="q_1" />
			<Transition event="em.timer.measure.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: em.timer.before_put" type="Plant">
		<Events>
			<Event id="em.timer.before_put.start" label="em.timer.before_put.start" controllable="true" prioritized="true" />
			<Event id="em.timer.before_put.timeout" label="em.timer.before_put.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="em.timer.before_put.start" source="q_0" dest="q_1" />
			<Transition event="em.timer.before_put.start" source="q_1" dest="q_1" />
			<Transition event="em.timer.before_put.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: es.timer.before_up" type="Plant">
		<Events>
			<Event id="es.timer.before_up.start" label="es.timer.before_up.start" controllable="true" prioritized="true" />
			<Event id="es.timer.before_up.timeout" label="es.timer.before_up.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="es.timer.before_up.start" source="q_0" dest="q_1" />
			<Transition event="es.timer.before_up.start" source="q_1" dest="q_1" />
			<Transition event="es.timer.before_up.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: es.timer.before_ballcheck" type="Plant">
		<Events>
			<Event id="es.timer.before_ballcheck.start" label="es.timer.before_ballcheck.start" controllable="true" prioritized="true" />
			<Event id="es.timer.before_ballcheck.timeout" label="es.timer.before_ballcheck.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="es.timer.before_ballcheck.start" source="q_0" dest="q_1" />
			<Transition event="es.timer.before_ballcheck.start" source="q_1" dest="q_1" />
			<Transition event="es.timer.before_ballcheck.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: es.timer.before_deput" type="Plant">
		<Events>
			<Event id="es.timer.before_deput.start" label="es.timer.before_deput.start" controllable="true" prioritized="true" />
			<Event id="es.timer.before_deput.timeout" label="es.timer.before_deput.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="es.timer.before_deput.start" source="q_0" dest="q_1" />
			<Transition event="es.timer.before_deput.start" source="q_1" dest="q_1" />
			<Transition event="es.timer.before_deput.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>
	<Automaton name="Timer: p.timer.before_turnleft" type="Plant">
		<Events>
			<Event id="arm.timer.before_turnleft.start" label="arm.timer.before_turnleft.start" controllable="true" prioritized="true" />
			<Event id="arm.timer.before_turnleft.timeout" label="arm.timer.before_turnleft.timeout" controllable="false" prioritized="true" />
		</Events>
		<States>
			<State id="q_0" initial="true" accepting="true" />
			<State id="q_1" accepting="true"/>		
		</States>
		<Transitions>
			<Transition event="arm.timer.before_turnleft.start" source="q_0" dest="q_1" />
			<Transition event="arm.timer.before_turnleft.start" source="q_1" dest="q_1" />
			<Transition event="arm.timer.before_turnleft.timeout" source="q_1" dest="q_0" />	
		</Transitions>
	</Automaton>	
<Execution>
	<Timers>
		<Timer name="em.timer.before_up" startEvent="em.timer.before_up.start" timeoutEvent="em.timer.before_up.timeout" delay="1000" />
		<Timer name="em.timer.before_ballcheck" startEvent="em.timer.before_ballcheck.start" timeoutEvent="em.timer.before_ballcheck.timeout" delay="1000" />
		<Timer name="em.timer.measure" startEvent="em.timer.measure.start" timeoutEvent="em.timer.measure.timeout" delay="1000" />
		<Timer name="em.timer.before_put" startEvent="em.timer.before_put.start" timeoutEvent="em.timer.before_put.timeout" delay="1000" />
		<Timer name="es.timer.before_up" startEvent="es.timer.before_up.start" timeoutEvent="es.timer.before_up.timeout" delay="1000" />
		<Timer name="es.timer.before_ballcheck" startEvent="es.timer.before_ballcheck.start" timeoutEvent="es.timer.before_ballcheck.timeout" delay="1000" />
		<Timer name="es.timer.before_deput" startEvent="es.timer.before_deput.start" timeoutEvent="es.timer.before_deput.timeout" delay="2000" />
		<Timer name="arm.timer.before_turnleft" startEvent="arm.timer.before_turnleft.start" timeoutEvent="arm.timer.before_turnleft.timeout" delay="2000" />
	</Timers>
	<InputSignals>
		<Signal label="KulaPortvakt" port="0"/>
		<Signal label="MatlyftNere" port="1"/>
		<Signal label="KulaMatlyft" port="2"/>
		<Signal label="MatlyftUppe" port="3"/>
		<Signal label="KulaMatstation" port="4"/>
		<Signal label="StorKula" port="5"/>
		<Signal label="LitenKula" port="6"/>
		<Signal label="HissNere" port="7"/>
		<Signal label="KulaHiss" port="10"/>
		<Signal label="HissVan1" port="11"/>
		<Signal label="KulaVan1" port="12"/>
		<Signal label="PlockaVan1" port="13"/>
		<Signal label="HissVan2" port="14"/>
		<Signal label="KulaVan2" port="15"/>
		<Signal label="PlockaVan2" port="16"/>
		<Signal label="ArmHemma" port="17"/>
		<Signal label="ArmVan1" port="20"/>
		<Signal label="ArmVan2" port="21"/>
		<Signal label="KulaFast" port="22"/>
		<Signal label="Autostart" port="23"/>
		<Signal label="ManuellStart" port="24"/>
		<Signal label="NodStopp" port="25"/>
		<Signal label="LarmKvittering" port="26"/>
	</InputSignals>
	<OutputSignals>
		<Signal label="InPortvakt" port="0"/>
		<Signal label="UrPortvakt" port="1"/>	
		<Signal label="UppMatlyft" port="2"/>	
		<Signal label="UrMatning" port="3"/>	
		<Signal label="Mat" port="4"/>	
		<Signal label="UppHissVan1" port="5"/>	
		<Signal label="UppHissVan2" port="6"/>	
		<Signal label="UtVan1" port="7"/>	
		<Signal label="LyftVan1" port="10"/>	
		<Signal label="UtVan2" port="11"/>	
		<Signal label="LyftVan2" port="12"/>			
		<Signal label="UppArmVan1" port="13"/>	
		<Signal label="UppArmVan2" port="14"/>	
		<Signal label="VridArmHoger" port="15"/>	
		<Signal label="Sug" port="16"/>			
	</OutputSignals>
	<Actions>
		<Action label="gk.in.go_out">
			<Command command="InPortvakt" value="true"/>
		</Action>
		<Action label="gk.in.go_in">
			<Command command="InPortvakt" value="false"/>
		</Action>
		<Action label="gk.out.go_out">
			<Command command="UrPortvakt" value="true"/>
		</Action>
		<Action label="gk.out.go_in">
			<Command command="UrPortvakt" value="false"/>
		</Action>
		<Action label="elevator.measure.go_up">
			<Command command="UppMatlyft" value="true"/>
		</Action>
		<Action label="elevator.measure.go_down">
			<Command command="UppMatlyft" value="false"/>
		</Action>
		<Action label="measure.go_out">
			<Command command="Mat" value="true"/>
		</Action>	
		<Action label="measure.go_in">
			<Command command="Mat" value="false"/>
		</Action>	
		<Action label="putter.measure.go_out">
			<Command command="UrMatning" value="true"/>
		</Action>	
		<Action label="putter.measure.go_in">
			<Command command="UrMatning" value="false"/>
		</Action>	
		<Action label="putter.lower_sorter.go_out">
			<Command command="UtVan1" value="true"/>
		</Action>
		<Action label="putter.lower_sorter.go_in">
			<Command command="UtVan1" value="false"/>
		</Action>
		<Action label="putter.upper_sorter.go_out">
			<Command command="UtVan2" value="true"/>
		</Action>
		<Action label="putter.upper_sorter.go_in">
			<Command command="UtVan2" value="false"/>
		</Action>
		<Action label="elevator.sorter.go_lower">
			<Command command="UppHissVan1" value="true"/>
			<Command command="UppHissVan2" value="false"/>
		</Action>
		<Action label="elevator.sorter.go_upper">
			<Command command="UppHissVan1" value="true"/>
			<Command command="UppHissVan2" value="true"/>
		</Action>
		<Action label="elevator.sorter.go_down">
			<Command command="UppHissVan1" value="false"/>
			<Command command="UppHissVan2" value="false"/>
		</Action>
		<Action label="arm.go_lower">
			<Command command="UppArmVan1" value="true"/>
			<Command command="VridArmHoger" value="true"/>
		</Action>
		<Action label="arm.go_upper">
			<Command command="UppArmVan2" value="true"/>
			<Command command="VridArmHoger" value="true"/>
		</Action>
		<Action label="arm.go_down">
			<Command command="UppArmVan1" value="false"/>
			<Command command="UppArmVan2" value="false"/>
			<Command command="VridArmHoger" value="false"/>
		</Action>
		<Action label="arm.raise_lower_buffer">
			<Command command="LyftVan1" value="true"/>
		</Action>
		<Action label="arm.lower_lower_buffer">
			<Command command="LyftVan1" value="false"/>
		</Action>
		<Action label="arm.raise_upper_buffer">
			<Command command="LyftVan2" value="true"/>
		</Action>
		<Action label="arm.lower_upper_buffer">
			<Command command="LyftVan2" value="false"/>
		</Action>
		<Action label="arm.create_vacuum">
			<Command command="Sug" value="true"/>
		</Action>
		<Action label="arm.release_ball">
			<Command command="Sug" value="false"/>
		</Action>	
<!--	
		<Action label="gk.enter_ball">
			<Command command="InPortvakt" value="true"/>
		</Action>
		<Action label="gk.ball_in_gatekeeper">
			<Command command="InPortvakt" value="false"/>
		</Action>
		<Action label="gk.release_ball">
			<Command command="UrPortvakt" value="true"/>
		</Action>
		<Action label="gk.ball_out_of_gatekeeper">
			<Command command="UrPortvakt" value="false"/>
		</Action>
		<Action label="em.go_up">
			<Command command="UppMatlyft" value="true"/>
		</Action>
		<Action label="em.go_down">
			<Command command="UppMatlyft" value="false"/>
		</Action>
		<Action label="em.start_measure">
			<Command command="Mat" value="true"/>
		</Action>	
		<Action label="em.stop_measure">
			<Command command="Mat" value="false"/>
		</Action>	
		<Action label="em.start_put">
			<Command command="UrMatning" value="true"/>
		</Action>	
		<Action label="em.stop_put">
			<Command command="UrMatning" value="false"/>
		</Action>	
		<Action label="es.lower_putter.go_out">
			<Command command="UtVan1" value="true"/>
		</Action>
		<Action label="es.lower_putter.go_in">
			<Command command="UtVan1" value="false"/>
		</Action>
		<Action label="es.upper_putter.go_out">
			<Command command="UtVan2" value="true"/>
		</Action>
		<Action label="es.upper_putter.go_in">
			<Command command="UtVan2" value="false"/>
		</Action>
		<Action label="es.up_lower">
			<Command command="UppHissVan1" value="true"/>
		</Action>
		<Action label="es.up_upper">
			<Command command="UppHissVan1" value="true"/>
			<Command command="UppHissVan2" value="true"/>
		</Action>
		<Action label="es.go_down">
			<Command command="UppHissVan1" value="false"/>
			<Command command="UppHissVan2" value="false"/>
		</Action>
		<Action label="arm.up_lower">
			<Command command="UppArmVan1" value="true"/>
			<Command command="VridArmHoger" value="true"/>
		</Action>
		<Action label="arm.up_upper">
			<Command command="UppArmVan2" value="true"/>
			<Command command="VridArmHoger" value="true"/>
		</Action>
		<Action label="arm.go_home">
			<Command command="UppArmVan1" value="false"/>
			<Command command="UppArmVan2" value="false"/>
			<Command command="VridArmHoger" value="false"/>
		</Action>
		<Action label="arm.raise_lower_buffer">
			<Command command="LyftVan1" value="true"/>
		</Action>
		<Action label="arm.lower_lower_buffer">
			<Command command="LyftVan1" value="false"/>
		</Action>
		<Action label="arm.raise_upper_buffer">
			<Command command="LyftVan2" value="true"/>
		</Action>
		<Action label="arm.lower_upper_buffer">
			<Command command="LyftVan2" value="false"/>
		</Action>
		<Action label="arm.create_vacuum">
			<Command command="Sug" value="true"/>
		</Action>
		<Action label="arm.release_ball">
			<Command command="Sug" value="false"/>
		</Action>
-->
	</Actions>
	<Controls>
		<Control label="button.manual.pressed">
			<Condition condition="ManuellStart" invert="true"/>			
		</Control>
		<Control label="button.manual.released">
			<Condition condition="ManuellStart" invert="false"/>			
		</Control>
		<Control label="button.autostart.pressed">
			<Condition condition="Autostart" invert="true"/>			
		</Control>
		<Control label="button.autostart.released">
			<Condition condition="Autostart" invert="false"/>			
		</Control>
		<Control label="gk.has_ball">
			<Condition condition="KulaPortvakt"/>
		</Control>
		<Control label="elevator.measure.is_down">
			<Condition condition="MatlyftNere"/>			
		</Control>
		<Control label="elevator.measure.has_ball">
			<Condition condition="KulaMatlyft"/>			
		</Control>
		<Control label="elevator.measure.is_up">
			<Condition condition="MatlyftUppe"/>			
		</Control>
		<Control label="measure.has_ball">
			<Condition condition="KulaMatstation" invert="false"/>			
		</Control>
		<Control label="measure.has_no_ball">
			<Condition condition="KulaMatstation" invert="true"/>			
		</Control>
		<Control label="elevator.sorter.has_ball">
			<Condition condition="KulaHiss"/>			
		</Control>
		<Control label="elevator.sorter.has_ball_lower">
			<Condition condition="KulaVan1"/>			
		</Control>
		<Control label="elevator.sorter.has_ball_upper">
			<Condition condition="KulaVan2"/>			
		</Control>
	</Controls>
</Execution>
</Automata>
